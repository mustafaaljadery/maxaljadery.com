# Design a Nofication System

A notification system has a bunch of services that include SMS, email, push notifications, and more.

## Functional Requirements
- Users will get messages on their preferred channel.
- Users will receive messages in real-time/ low latency.
- Users can subscribe to multiple channels.
- Notifications can both be server trigger and user triggered.

## Non-functional Requirements
- Ability to handle high throughput.
- Low latency.
- High availability.

## High-level Design

<img src="/system-design/notification-system-highlevel.png"/>

### Queues
- Queues are used to decouple the notification service from the services that generate notifications.
- They are amazing because they can handle high throughput and are resilent to spikes in traffic and failures.

## Detailed Design

<img src="/system-design/notification-system-deep-dive.png"/>

### Notification Retry
- If a notification fails to send, we can add it back to the queue to retry.
- We can also add a retry count to prevent infinite retries.

## Tradeoffs, Bottlenecks, and Summary

### Tradeoffs
- I'm not adding scheduling, this has to be done by the service that generates the notification. This is a good feature because some notifications are time sensitive.

### Bottlenecks
- The notification execution is dependent on the number of servers executing the notification. If the traffic grows, we have to scale those services.

### Summary

We designed a notification system that can handle high throughput and is resilient to failures. We used queues to decouple the notification service from the services that generate notifications. We also added a retry mechanism to retry failed notifications.